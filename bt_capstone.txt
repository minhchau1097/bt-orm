CREATE DATABASE bt_capstone;

use bt_capstone;


DROP DATABASE bt_capstone

CREATE TABLE users(
    user_id int PRIMARY KEY AUTO_INCREMENT,
    full_name VARCHAR(50) NOT NULL,
    email VARCHAR(50) NOT NULL,
    pass_word VARCHAR(50) NOT NULL,
    age int NOT NULL,
    avatar VARCHAR(255)
);
	ALTER TABLE users
	MODIFY COLUMN age TINYINT UNSIGNED NOT NULL,
	MODIFY COLUMN pass_word VARCHAR(255) NOT NULL

CREATE TABLE images(
user_id int,
	 FOREIGN KEY (user_id) REFERENCES users(user_id),
	image_id int PRIMARY KEY AUTO_INCREMENT,
	source VARCHAR(255) NOT NULL,
	name VARCHAR(155) NOT NULL,
	description TEXT not NULL
);

CREATE TABLE comments(
comment_id int PRIMARY KEY AUTO_INCREMENT,
image_id int,
	FOREIGN KEY (image_id) REFERENCES images(image_id),
	user_id int,
	 FOREIGN KEY (user_id) REFERENCES users(user_id),
	 content TEXT not NULL,
	 date_comment DATETIME not NULL
	 
);

CREATE TABLE save_image(
image_id int ,
	FOREIGN KEY (image_id) REFERENCES images(image_id),
	user_id int,
	 FOREIGN KEY (user_id) REFERENCES users(user_id),
	 date_save DATETIME not NULL
);

ALTER TABLE save_image
add save_image_id int PRIMARY KEY AUTO_INCREMENT

INSERT INTO users (full_name, email, pass_word, age, avatar) VALUES
('John Doe', 'john.doe@example.com', 'password123', 25, 'avatar1.jpg'),
('Jane Smith', 'jane.smith@example.com', 'abc123', 30, 'avatar2.jpg'),
('Michael Johnson', 'michael.johnson@example.com', 'pass456', 40, 'avatar3.jpg');

INSERT INTO images (user_id, source, name, description) VALUES
(1, 'image1.jpg', 'Image 1', 'This is an image of a beautiful landscape.'),
(1, 'image2.jpg', 'Image 2', 'This is a picture of a cute dog.'),
(2, 'image3.jpg', 'Image 3', 'A stunning sunset captured on camera.');

INSERT INTO images (user_id, source, name, description) VALUES
(4, 'image4.jpg', 'Image 4', 'A stunning sunset captured on camera.'),
(15, 'image15.jpg', 'Image 15', 'A stunning sunset captured on camera.');

INSERT INTO comments (image_id, user_id, content, date_comment) VALUES
(1, 2, 'Great photo!', '2023-10-18 14:30:00'),
(1, 3, 'I love the colors!', '2023-10-18 15:00:00'),
(2, 1, 'What a cute dog!', '2023-10-19 09:45:00');

INSERT INTO save_image (image_id, user_id, date_save) VALUES
(1, 3, '2023-10-18 17:20:00'),
(2, 2, '2023-10-19 10:00:00');

INSERT INTO save_image (image_id, user_id, date_save) VALUES
(3, 15, '2023-10-12 17:00:00');
